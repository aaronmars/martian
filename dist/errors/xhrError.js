'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.XhrError = undefined;

var _mtError = require('./mtError');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Martian - Core JavaScript API for MindTouch
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2015 MindTouch Inc.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * www.mindtouch.com  oss@mindtouch.com
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Licensed under the Apache License, Version 2.0 (the "License");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * you may not use this file except in compliance with the License.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You may obtain a copy of the License at
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *     http://www.apache.org/licenses/LICENSE-2.0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Unless required by applicable law or agreed to in writing, software
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * distributed under the License is distributed on an "AS IS" BASIS,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * See the License for the specific language governing permissions and
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * limitations under the License.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */


var XhrError = exports.XhrError = function (_MTError) {
    _inherits(XhrError, _MTError);

    function XhrError(xhr) {
        var customMessage = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];

        _classCallCheck(this, XhrError);

        var response = void 0;
        var message = void 0;
        if ('responseText' in xhr) {
            try {
                response = JSON.parse(xhr.responseText);
                message = response.message;
            } catch (e) {
                message = xhr.responseText || customMessage;
            }
        }
        message = message || 'Status ' + xhr.status + ' from request';

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(XhrError).call(this, message));

        _this.errorCode = xhr.status;
        _this.response = response || null;
        return _this;
    }

    return XhrError;
}(_mtError.MTError);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9ycy94aHJFcnJvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBa0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUNhOzs7QUFDVCxhQURTLFFBQ1QsQ0FBWSxHQUFaLEVBQXFDO1lBQXBCLHNFQUFnQixrQkFBSTs7OEJBRDVCLFVBQzRCOztBQUNqQyxZQUFJLGlCQUFKLENBRGlDO0FBRWpDLFlBQUksZ0JBQUosQ0FGaUM7QUFHakMsWUFBRyxrQkFBa0IsR0FBbEIsRUFBdUI7QUFDdEIsZ0JBQUk7QUFDQSwyQkFBVyxLQUFLLEtBQUwsQ0FBVyxJQUFJLFlBQUosQ0FBdEIsQ0FEQTtBQUVBLDBCQUFVLFNBQVMsT0FBVCxDQUZWO2FBQUosQ0FHRSxPQUFNLENBQU4sRUFBUztBQUNQLDBCQUFVLElBQUksWUFBSixJQUFvQixhQUFwQixDQURIO2FBQVQ7U0FKTjtBQVFBLGtCQUFVLHVCQUFxQixJQUFJLE1BQUosa0JBQXJCLENBWHVCOzsyRUFENUIscUJBYUMsVUFaMkI7O0FBYWpDLGNBQUssU0FBTCxHQUFpQixJQUFJLE1BQUosQ0FiZ0I7QUFjakMsY0FBSyxRQUFMLEdBQWdCLFlBQVksSUFBWixDQWRpQjs7S0FBckM7O1dBRFMiLCJmaWxlIjoiZXJyb3JzL3hockVycm9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNYXJ0aWFuIC0gQ29yZSBKYXZhU2NyaXB0IEFQSSBmb3IgTWluZFRvdWNoXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE1IE1pbmRUb3VjaCBJbmMuXG4gKiB3d3cubWluZHRvdWNoLmNvbSAgb3NzQG1pbmR0b3VjaC5jb21cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7TVRFcnJvcn0gZnJvbSAnLi9tdEVycm9yJztcbmV4cG9ydCBjbGFzcyBYaHJFcnJvciBleHRlbmRzIE1URXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHhociwgY3VzdG9tTWVzc2FnZSA9ICcnKSB7XG4gICAgICAgIGxldCByZXNwb25zZTtcbiAgICAgICAgbGV0IG1lc3NhZ2U7XG4gICAgICAgIGlmKCdyZXNwb25zZVRleHQnIGluIHhocikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0geGhyLnJlc3BvbnNlVGV4dCB8fCBjdXN0b21NZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8IGBTdGF0dXMgJHt4aHIuc3RhdHVzfSBmcm9tIHJlcXVlc3RgO1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5lcnJvckNvZGUgPSB4aHIuc3RhdHVzO1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2UgfHwgbnVsbDtcbiAgICB9XG59XG4iXX0=
//# sourceMappingURL=xhrError.js.map
